<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ®Ø·ÙŠØ· Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„ÙØ·Ø± Ø§Ù„Ø£Ø¨ÙŠØ¶ (Agaricus bisporus) - Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø³ÙˆØ±ÙŠØ©</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-dark: #1a5276;
            --primary: #2c3e50;
            --accent-green: #27ae60;
            --accent-light: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --info-blue: #3498db;
            --bg-light: #f8f9fa;
            --card-bg: #ffffff;
            --text-dark: #2c3e50;
            --text-light: #7f8c8d;
            --border-color: #dfe6e9;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            --shadow-heavy: 0 15px 50px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Cairo', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            color: white;
            padding: 25px 20px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border-bottom: 4px solid var(--accent-green);
        }

        .header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header p {
            font-size: 1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Main Container */
        .main-container {
            display: grid;
            grid-template-columns: 400px 1fr;
            gap: 25px;
            max-width: 1600px;
            margin: 30px auto;
            padding: 0 20px;
        }

        @media (max-width: 1100px) {
            .main-container {
                grid-template-columns: 1fr;
            }
        }

        /* Sidebar */
        .sidebar {
            background: var(--card-bg);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 25px;
            height: fit-content;
            position: sticky;
            top: 20px;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary);
            font-size: 1.1rem;
            margin: 25px 0 15px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }

        .section-title:first-child {
            margin-top: 0;
        }

        .input-group {
            margin-bottom: 18px;
        }

        .input-group label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        .input-group input, 
        .input-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background: #fff;
            transition: var(--transition);
        }

        .input-group input:focus, 
        .input-group select:focus {
            outline: none;
            border-color: var(--accent-green);
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.1);
        }

        .input-note {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 5px;
            display: block;
        }

        .phase-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 8px;
        }

        .phase-2 { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .phase-3 { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .phase-4 { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }

        /* Results Panel */
        .results-panel {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .stat-card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            border-top: 4px solid var(--accent-green);
            transition: var(--transition);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-heavy);
        }

        .stat-card.financial {
            border-top-color: var(--warning);
        }

        .stat-card label {
            display: block;
            font-size: 0.85rem;
            color: var(--text-light);
            margin-bottom: 8px;
        }

        .stat-card .value {
            font-size: 1.6rem;
            font-weight: 700;
            color: var(--primary);
            line-height: 1.2;
        }

        .stat-card .unit {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-right: 5px;
        }

        /* Canvas Container */
        .canvas-container {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .canvas-container h3 {
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #farmCanvas {
            width: 100%;
            height: auto;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            background: #fdfdfd;
            display: block;
            margin: 0 auto;
        }

        .canvas-legend {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.85rem;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }

        /* Guide Section */
        .guide-section {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            border-top: 4px solid var(--info-blue);
        }

        .guide-section h2 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border-color);
        }

        .guide-section h3 {
            color: var(--accent-green);
            margin: 25px 0 15px 0;
            font-size: 1.2rem;
        }

        .formula-box {
            background: #f8f9fa;
            border-right: 5px solid var(--primary);
            padding: 18px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            border-radius: 0 8px 8px 0;
            overflow-x: auto;
        }

        .phase-info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .phase-card {
            padding: 20px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            transition: var(--transition);
        }

        .phase-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .phase-card h4 {
            margin-bottom: 10px;
            color: var(--primary);
        }

        /* Buttons */
        .btn-primary {
            background: linear-gradient(to right, var(--accent-green), var(--accent-light));
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            width: 100%;
            margin-top: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary:hover {
            opacity: 0.9;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: var(--text-light);
            font-size: 0.9rem;
            border-top: 1px solid var(--border-color);
            margin-top: 40px;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.5rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .phase-info-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .main-container {
                padding: 0 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1><i class="fas fa-mushroom"></i>ØªØ®Ø·ÙŠØ· Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„ÙØ·Ø± Ø§Ù„Ø£Ø¨ÙŠØ¶ (Agaricus bisporus)</h1>
        <p>Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø£Ø¨Ø­Ø§Ø« Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¨Ø­ÙˆØ« Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© - Ù…Ø±ÙƒØ² Ø­Ù„Ø¨ØŒ Ø³ÙˆØ±ÙŠØ© | Ø¥ØµØ¯Ø§Ø± 6.0</p>
    </div>

    <div class="main-container">
        <!-- Sidebar: Inputs Panel -->
        <aside class="sidebar">
            <div class="section-title">
                <i class="fas fa-ruler-combined"></i>
                <h3>ğŸ“ Ø§Ù„Ø£Ø¨Ø¹Ø§Ø¯ Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠØ© Ù„Ù„ØµØ§Ù„Ø©</h3>
            </div>
            
            <div class="input-group">
                <label for="roomLength">Ø·ÙˆÙ„ Ø§Ù„ØµØ§Ù„Ø© (Ù…ØªØ±) <span class="input-note">[Ø§Ù„Ø£Ø¯Ù†Ù‰: 2Ù…ØŒ Ø§Ù„Ø£Ù‚ØµÙ‰: 50Ù…]</span></label>
                <input type="number" id="roomLength" value="18" min="2" max="50" step="0.1" oninput="validateInputs()">
            </div>
            
            <div class="input-group">
                <label for="roomWidth">Ø¹Ø±Ø¶ Ø§Ù„ØµØ§Ù„Ø© (Ù…ØªØ±) <span class="input-note">[Ø§Ù„Ø£Ø¯Ù†Ù‰: 2Ù…ØŒ Ø§Ù„Ø£Ù‚ØµÙ‰: 20Ù…]</span></label>
                <input type="number" id="roomWidth" value="5.5" min="2" max="20" step="0.1" oninput="validateInputs()">
            </div>
            
            <div class="input-group">
                <label for="aisleWidth">Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù…Ø± Ø§Ù„Ø·ÙˆÙ„ÙŠ (Ù…ØªØ±) <span class="input-note">[Ø§Ù„Ù…Ø¹ÙŠØ§Ø±: 0.8Ù… Ù„Ù„Ø®Ø¯Ù…Ø©]</span></label>
                <input type="number" id="aisleWidth" value="0.8" min="0.5" max="2" step="0.1" oninput="validateInputs()">
            </div>

            <div class="section-title">
                <i class="fas fa-layer-group"></i>
                <h3>ğŸ—„ï¸ ØªØµÙ…ÙŠÙ… Ù†Ø¸Ø§Ù… Ø§Ù„Ø±ÙÙˆÙ</h3>
            </div>
            
            <div class="input-group">
                <label for="shelfLevels">Ø¹Ø¯Ø¯ Ø·Ø¨Ù‚Ø§Øª Ø§Ù„Ø±ÙÙˆÙ <span class="input-note">[Ø§Ù„Ù…Ø¹ÙŠØ§Ø±: 5 Ø·Ø¨Ù‚Ø§Øª]</span></label>
                <input type="number" id="shelfLevels" value="5" min="1" max="10" oninput="validateInputs()">
            </div>
            
            <div class="input-group">
                <label for="shelfWidth">Ø¹Ø±Ø¶ Ø§Ù„Ø±Ù Ø§Ù„ÙˆØ§Ø­Ø¯ (Ù…ØªØ±) <span class="input-note">[Ø§Ù„Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ: 1.2Ù…]</span></label>
                <input type="number" id="shelfWidth" value="1.2" min="0.5" max="2" step="0.1" oninput="validateInputs()">
            </div>

            <div class="section-title">
                <i class="fas fa-seedling"></i>
                <h3>ğŸŒ± Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©</h3>
            </div>
            
            <div class="input-group">
                <label for="compostPhase">Ø·ÙˆØ± Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª (Phase)</label>
                <select id="compostPhase" onchange="updatePhaseSettings()">
                    <option value="2">Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø«Ø§Ù†ÙŠ (Phase II) - Ù…Ø¹Ù‚Ù…/ÙŠØ­ØªØ§Ø¬ ØªÙ„Ù‚ÙŠØ­</option>
                    <option value="3" selected>Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø«Ø§Ù„Ø« (Phase III) - Ù…Ù„Ù‚Ø­ ÙˆÙ…Ø­ØªÙ„ Ø¬Ø§Ù‡Ø²</option>
                    <option value="4">Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø±Ø§Ø¨Ø¹ (Phase IV) - Ù…ØºØ·Ù‰ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø«Ù…Ø§Ø±</option>
                </select>
                <div id="phaseBadge" class="phase-badge phase-3">Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø«Ø§Ù„Ø«: 6-7 Ø¯ÙˆØ±Ø§Øª/Ø³Ù†Ø©</div>
            </div>
            
            <div class="input-group">
                <label for="compostDensity">ÙƒØ«Ø§ÙØ© Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª (ÙƒØ¬Ù…/Ù…Â²) <span class="input-note">[Ø§Ù„Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ø³ÙˆØ±ÙŠ: 95-100 ÙƒØ¬Ù…/Ù…Â²]</span></label>
                <input type="number" id="compostDensity" value="95" min="70" max="120" step="1" oninput="validateInputs()">
            </div>
            
            <div class="input-group">
                <label for="yieldPerSqM">Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹ (ÙƒØ¬Ù…/Ù…Â²) <span class="input-note">[Ø§Ù„Ø³ÙˆØ±ÙŠ: 30-45 ÙƒØ¬Ù…/Ù…Â² Ø­Ø³Ø¨ Ø§Ù„ØªØ­ÙƒÙ…]</span></label>
                <input type="number" id="yieldPerSqM" value="30" min="10" max="60" step="1" oninput="validateInputs()">
            </div>

            <div class="section-title">
                <i class="fas fa-chart-line"></i>
                <h3>ğŸ’° Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø§Ù„Ù…Ø§Ù„ÙŠØ©</h3>
            </div>
            
            <div class="input-group">
                <label for="exchangeRate">Ø³Ø¹Ø± ØµØ±Ù Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± (Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©) <span class="input-note">[Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ù„Ù„ÙŠØ±Ø©]</span></label>
                <input type="number" id="exchangeRate" value="15000" min="1000" max="100000" step="1000" oninput="validateInputs()">
            </div>
            
            <div class="input-group">
                <label for="compostPrice">Ø³Ø¹Ø± Ø·Ù† Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª ($) <span class="input-note">[Ø­Ø³Ø¨ Ø§Ù„Ø·ÙˆØ± ÙˆØ§Ù„Ø¬ÙˆØ¯Ø©]</span></label>
                <input type="number" id="compostPrice" value="280" min="100" max="500" step="10" oninput="validateInputs()">
            </div>
            
            <div class="input-group">
                <label for="mushroomPrice">Ø³Ø¹Ø± Ø¨ÙŠØ¹ Ø§Ù„ÙƒÙŠÙ„Ùˆ ($) <span class="input-note">[Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹]</span></label>
                <input type="number" id="mushroomPrice" value="2.5" min="0.5" max="10" step="0.1" oninput="validateInputs()">
            </div>
            
            <div class="input-group">
                <label for="operationalCosts">Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©/Ø¯ÙˆØ±Ø© ($) <span class="input-note">[ÙƒÙ‡Ø±Ø¨Ø§Ø¡ØŒ Ø¹Ù…Ø§Ù„Ø©ØŒ ØµÙŠØ§Ù†Ø©]</span></label>
                <input type="number" id="operationalCosts" value="400" min="0" max="5000" step="50" oninput="validateInputs()">
            </div>

            <button class="btn-primary" onclick="calculateAll()">
                <i class="fas fa-calculator"></i> ØªØ­Ø¯ÙŠØ« Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ÙˆØ§Ù„Ø±Ø³Ù…
            </button>
            
            <div class="input-note" style="margin-top: 15px; text-align: center;">
                <i class="fas fa-info-circle"></i> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª ØªØ­Ø¯Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø£ÙŠ Ù‚ÙŠÙ…Ø©
            </div>
        </aside>

        <!-- Main Content: Results Panel -->
        <main class="results-panel">
            <!-- Results Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <label><i class="fas fa-vector-square"></i> Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙØ¹Ø§Ù„Ø© Ø§Ù„ÙƒÙ„ÙŠØ©</label>
                    <div class="value" id="totalArea">0</div>
                    <span class="unit">Ù…ØªØ± Ù…Ø±Ø¨Ø¹</span>
                </div>
                
                <div class="stat-card">
                    <label><i class="fas fa-weight-hanging"></i> Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨/Ø¯ÙˆØ±Ø©</label>
                    <div class="value" id="totalCompost">0</div>
                    <span class="unit">Ø·Ù†</span>
                </div>
                
                <div class="stat-card">
                    <label><i class="fas fa-tint"></i> Ø§Ø­ØªÙŠØ§Ø¬ Ø§Ù„Ø¨ÙŠØªÙ…ÙˆØ³/Ø¯ÙˆØ±Ø©</label>
                    <div class="value" id="totalPeat">0</div>
                    <span class="unit">Ù„ØªØ±</span>
                </div>
                
                <div class="stat-card">
                    <label><i class="fas fa-chart-bar"></i> Ø§Ù„Ø¥Ù†ØªØ§Ø¬ Ø§Ù„Ø³Ù†ÙˆÙŠ Ø§Ù„ØªÙ‚Ø¯ÙŠØ±ÙŠ</label>
                    <div class="value" id="annualYield">0</div>
                    <span class="unit">Ø·Ù†</span>
                </div>
                
                <div class="stat-card financial">
                    <label><i class="fas fa-dollar-sign"></i> Ø±Ø¨Ø­ Ø§Ù„Ø¯ÙˆØ±Ø© ($)</label>
                    <div class="value" id="profitCycle">0</div>
                    <span class="unit">Ø¯ÙˆÙ„Ø§Ø±</span>
                </div>
                
                <div class="stat-card financial">
                    <label><i class="fas fa-money-bill-wave"></i> Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ø³Ù†ÙˆÙŠ (Ù„.Ø³)</label>
                    <div class="value" id="profitAnnualSYP">0</div>
                    <span class="unit">Ù„ÙŠØ±Ø© Ø³ÙˆØ±ÙŠØ©</span>
                </div>
            </div>

            <!-- Canvas Drawing -->
            <div class="canvas-container">
                <h3><i class="fas fa-drafting-compass"></i> Ø§Ù„Ù…Ø®Ø·Ø· Ø§Ù„Ù‡Ù†Ø¯Ø³ÙŠ ÙˆØªÙˆØ²ÙŠØ¹ Ø§Ù„Ø£Ø­Ù…Ø§Ù„</h3>
                <canvas id="farmCanvas" width="1000" height="500"></canvas>
                
                <div class="canvas-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #27ae60;"></div>
                        <span>Ø§Ù„Ø±ÙÙˆÙ (Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„Ù…Ø²Ø±ÙˆØ¹Ø©)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #ffffff; border: 1px solid #ddd;"></div>
                        <span>Ø§Ù„Ù…Ù…Ø±Ø§Øª (Ø­Ø±ÙƒØ© Ø§Ù„Ø®Ø¯Ù…Ø©)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #3498db;"></div>
                        <span>Ø§Ù„Ù…Ù…Ø± Ø§Ù„Ø¹Ø±Ø¶ÙŠ (Ù„Ù„Ø£Ø·ÙˆØ§Ù„ > 12Ù…)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #2c3e50;"></div>
                        <span>Ø¬Ø¯Ø±Ø§Ù† Ø§Ù„ØµØ§Ù„Ø©</span>
                    </div>
                </div>
                
                <p style="font-size: 0.9rem; color: var(--text-light); margin-top: 15px;">
                    <i class="fas fa-lightbulb"></i> <strong>Ù…Ø¹Ù„ÙˆÙ…Ø©:</strong> Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ Ø¹Ù„Ù‰ Ø§Ù„Ø±ÙÙˆÙ ØªÙ…Ø«Ù„ ÙˆØ²Ù† Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª (Ø¨Ø§Ù„Ø£Ø·Ù†Ø§Ù†) Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ Ù„ÙƒÙ„ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø±ÙÙˆÙ
                </p>
            </div>

            <!-- Guide Section -->
            <div class="guide-section">
                <h2><i class="fas fa-book-open"></i> Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¹Ù„Ù…ÙŠ ÙˆØ§Ù„Ø¥Ø±Ø´Ø§Ø¯ÙŠ Ù„Ù„Ù†Ø¸Ø§Ù…</h2>
                
                <div class="phase-info-grid">
                    <div class="phase-card">
                        <h4>Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø«Ø§Ù†ÙŠ (Phase II)</h4>
                        <p>ÙƒÙˆÙ…Ø¨ÙˆØ³Øª Ù…Ø¹Ù‚Ù… ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ Ø¹Ù…Ù„ÙŠØ© ØªÙ„Ù‚ÙŠØ­ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø²Ø±Ø¹Ø©. ÙŠØ­ØªØ§Ø¬ 15-20 ÙŠÙˆÙ… ØªØ­Ø¶ÙŠÙ†. ÙŠÙˆÙØ± 4-5 Ø¯ÙˆØ±Ø§Øª/Ø³Ù†Ø©.</p>
                    </div>
                    
                    <div class="phase-card" style="border-color: #27ae60;">
                        <h4>Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø«Ø§Ù„Ø« (Phase III)</h4>
                        <p>ÙƒÙˆÙ…Ø¨ÙˆØ³Øª Ù…Ù„Ù‚Ø­ ÙˆØ¬Ø§Ù‡Ø² Ù„Ù„Ø²Ø±Ø§Ø¹Ø© Ù…Ø¨Ø§Ø´Ø±Ø©. ÙŠÙˆÙØ± 6-7 Ø¯ÙˆØ±Ø§Øª/Ø³Ù†Ø© (Ø§Ù„Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ø³ÙˆØ±ÙŠ). Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ø£Ø¹Ù„Ù‰ Ø¨Ù†Ø³Ø¨Ø© 15%.</p>
                    </div>
                    
                    <div class="phase-card">
                        <h4>Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø±Ø§Ø¨Ø¹ (Phase IV)</h4>
                        <p>ÙƒÙˆÙ…Ø¨ÙˆØ³Øª Ù…ØºØ·Ù‰ ÙˆØªØ±Ø¨ØªÙ‡ Ù…Ø³ØªØ¹Ù…Ø±Ø© Ø¨Ø§Ù„Ù…Ø´ÙŠØ¬Ø©. Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¥Ø«Ù…Ø§Ø± Ù…Ø¨Ø§Ø´Ø±Ø©. ÙŠÙˆÙØ± 8-10 Ø¯ÙˆØ±Ø§Øª/Ø³Ù†Ø© ÙÙŠ Ø§Ù„Ù…Ø²Ø§Ø±Ø¹ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©.</p>
                    </div>
                </div>
                
                <h3>ğŸ§® Ø§Ù„Ù…Ø¹Ø§Ø¯Ù„Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø©</h3>
                <div class="formula-box">
                    // 1. Ø­Ø³Ø§Ø¨ Ø¹Ø¯Ø¯ ØµÙÙˆÙ Ø§Ù„Ø±ÙÙˆÙ<br>
                    ØµÙÙˆÙ = âŒŠ(Ø¹Ø±Ø¶_Ø§Ù„ØµØ§Ù„Ø© - 1) Ã· (Ø¹Ø±Ø¶_Ø§Ù„Ø±Ù + Ø¹Ø±Ø¶_Ø§Ù„Ù…Ù…Ø±)âŒ‹<br><br>
                    
                    // 2. Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§Ø­Ø© Ø§Ù„ÙØ¹Ø§Ù„Ø©<br>
                    Ù…Ø³Ø§Ø­Ø©_Ø§Ù„Ø±Ù_Ø§Ù„ÙˆØ§Ø­Ø¯ = Ø·ÙˆÙ„_Ø§Ù„Ø±Ù_Ø§Ù„ØµØ§ÙÙŠ Ã— Ø¹Ø±Ø¶_Ø§Ù„Ø±Ù<br>
                    Ù…Ø³Ø§Ø­Ø©_ÙƒÙ„_Ø§Ù„Ø·Ø¨Ù‚Ø§Øª = Ù…Ø³Ø§Ø­Ø©_Ø§Ù„Ø±Ù_Ø§Ù„ÙˆØ§Ø­Ø¯ Ã— Ø¹Ø¯Ø¯_Ø§Ù„Ø·Ø¨Ù‚Ø§Øª<br>
                    Ø§Ù„Ù…Ø³Ø§Ø­Ø©_Ø§Ù„ÙƒÙ„ÙŠØ© = Ù…Ø³Ø§Ø­Ø©_ÙƒÙ„_Ø§Ù„Ø·Ø¨Ù‚Ø§Øª Ã— Ø¹Ø¯Ø¯_Ø§Ù„ØµÙÙˆÙ<br><br>
                    
                    // 3. Ø­Ø³Ø§Ø¨ ÙƒÙ…ÙŠØ© Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª<br>
                    ÙƒÙ…ÙŠØ©_Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª(Ø·Ù†) = (Ø§Ù„Ù…Ø³Ø§Ø­Ø©_Ø§Ù„ÙƒÙ„ÙŠØ© Ã— Ø§Ù„ÙƒØ«Ø§ÙØ©) Ã· 1000<br><br>
                    
                    // 4. Ø­Ø³Ø§Ø¨ ÙƒÙ…ÙŠØ© Ø§Ù„Ø¨ÙŠØªÙ…ÙˆØ³<br>
                    ÙƒÙ…ÙŠØ©_Ø§Ù„Ø¨ÙŠØªÙ…ÙˆØ³(Ù„ØªØ±) = Ø§Ù„Ù…Ø³Ø§Ø­Ø©_Ø§Ù„ÙƒÙ„ÙŠØ© Ã— 45 (Ù„ØªØ±/Ù…Â²)<br><br>
                    
                    // 5. Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©<br>
                    Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯_Ø§Ù„Ø¯ÙˆØ±Ø© = (Ø§Ù„Ø¥Ù†ØªØ§Ø¬_Ø§Ù„Ø¯ÙˆØ±Ø© Ã— Ø³Ø¹Ø±_Ø§Ù„ÙƒÙŠÙ„Ùˆ)<br>
                    Ø§Ù„ØªÙƒÙ„ÙØ©_Ø§Ù„Ø¯ÙˆØ±Ø© = (ÙƒÙ…ÙŠØ©_Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª Ã— Ø³Ø¹Ø±_Ø§Ù„Ø·Ù†) + Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ_Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ©<br>
                    Ø§Ù„Ø±Ø¨Ø­_Ø§Ù„Ø¯ÙˆØ±Ø© = Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯_Ø§Ù„Ø¯ÙˆØ±Ø© - Ø§Ù„ØªÙƒÙ„ÙØ©_Ø§Ù„Ø¯ÙˆØ±Ø©
                </div>
                
                <h3>ğŸ“Š Ø§Ù„Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø³ÙˆØ±ÙŠØ© (Ø­Ø³Ø¨ Ù…Ø±ÙƒØ² Ø¨Ø­ÙˆØ« Ø­Ù„Ø¨)</h3>
                <ul style="padding-right: 20px; margin-bottom: 20px;">
                    <li>Ù…ØªÙˆØ³Ø· Ø§Ù„Ø¥Ù†ØªØ§Ø¬: 30 ÙƒØ¬Ù…/Ù…Â² (ÙŠÙ…ÙƒÙ† Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù€ 45 ÙƒØ¬Ù…/Ù…Â² Ù…Ø¹ Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø«Ø§Ù„ÙŠ)</li>
                    <li>ÙƒØ«Ø§ÙØ© Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª: 95-100 ÙƒØ¬Ù…/Ù…Â² Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ© Ø§Ù„Ø¹Ø§Ù„ÙŠØ©</li>
                    <li>Ø³Ù…Ø§ÙƒØ© ØªØºØ·ÙŠØ© Ø§Ù„Ø¨ÙŠØªÙ…ÙˆØ³: 4-5 Ø³Ù… (ØªØ¹Ø§Ø¯Ù„ 45 Ù„ØªØ±/Ù…Â²)</li>
                    <li>Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ©: 5-7 Ø¯ÙˆØ±Ø§Øª Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª</li>
                    <li>Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ù…Ø«Ù„Ù‰ Ù„Ù„Ø¥Ø«Ù…Ø§Ø±: 16-18Â°Ù…</li>
                    <li>Ø§Ù„Ø±Ø·ÙˆØ¨Ø© Ø§Ù„Ù†Ø³Ø¨ÙŠØ© Ø§Ù„Ù…Ø«Ù„Ù‰: 85-90%</li>
                </ul>
                
                <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; margin-top: 20px; border-right: 4px solid var(--accent-green);">
                    <h4 style="color: var(--accent-green); margin-bottom: 10px;"><i class="fas fa-lightbulb"></i> Ù†ØµØ§Ø¦Ø­ Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø¥Ù†ØªØ§Ø¬ÙŠØ©</h4>
                    <p>1. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª Ù…Ù† Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø«Ø§Ù„Ø« Ø£Ùˆ Ø§Ù„Ø±Ø§Ø¨Ø¹ Ù„Ø²ÙŠØ§Ø¯Ø© Ø¹Ø¯Ø¯ Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ø³Ù†ÙˆÙŠØ©.<br>
                    2. Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø¯Ù‚ÙŠÙ‚ Ø¨Ø¯Ø±Ø¬Ø© Ø§Ù„Ø­Ø±Ø§Ø±Ø© (16-18Â°Ù…) ÙˆØ§Ù„Ø±Ø·ÙˆØ¨Ø© (85-90%) Ø®Ù„Ø§Ù„ Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø¥Ø«Ù…Ø§Ø±.<br>
                    3. Ø¶Ù…Ø§Ù† Ø§Ù„ØªÙ‡ÙˆÙŠØ© Ø§Ù„Ø¬ÙŠØ¯Ø© Ù„ØªÙ‚Ù„ÙŠÙ„ ØªØ±ÙƒÙŠØ² COâ‚‚ ØªØ­Øª 1500 ppm.<br>
                    4. Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù…ÙŠØ§Ù‡ Ø°Ø§Øª Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© Ø®Ø§Ù„ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ù„ÙˆØ«Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø§Ø¯Ù† Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©.</p>
                </div>
            </div>
        </main>
    </div>

   <!-- Ø§Ù„ÙÙˆØªØ± -->
        <footer class="footer">
            <p><strong>Â© 2026 Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„ Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„ÙØ·Ø± Ø§Ù„Ø£Ø¨ÙŠØ¶ (Agaricus bisporus)</strong></p>
            <p style="margin: 1rem 0;">ğŸ“… <strong>ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡:</strong> 12 ÙŠÙ†Ø§ÙŠØ± 2026 | ğŸ‘¤ <strong>Ø¥Ø¹Ø¯Ø§Ø¯:</strong> Ù‚ØªÙŠØ¨Ø© Ø£Ù‚Ø±Ø¹ - Ø­Ù„Ø¨ - Ø³ÙˆØ±ÙŠØ§ | ğŸ“§ <strong>Ø§Ù„Ø¨Ø±ÙŠØ¯:</strong> kutaibaa@gmail.com</p>
            <p>Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø¯Ø§Ø© Ù…Ø®ØµØµØ© Ù„Ù„ØªØ®Ø·ÙŠØ· Ø§Ù„Ø£ÙˆÙ„ÙŠ ÙˆØªÙ‚Ø¯ÙŠØ± Ø§Ù„ÙƒÙ…ÙŠØ§Øª - ÙŠÙˆØµÙ‰ Ø¨Ø§Ø³ØªØ´Ø§Ø±Ø© Ø®Ø¨Ø±Ø§Ø¡ Ù…ØªØ®ØµØµÙŠÙ† Ù„Ù„ØªÙ†ÙÙŠØ° Ø§Ù„ÙØ¹Ù„ÙŠ</p>
            <div style="margin-top: 1rem; padding: 1rem; background: white; border-radius: 8px;">
                <p style="font-size: 0.85rem; color: #888; margin: 0;">
                    <strong>Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¹Ù„Ù…ÙŠØ©:</strong><br>
                    1. Ø§Ù„Ù‡ÙŠØ¦Ø© Ø§Ù„Ø¹Ø§Ù…Ø© Ù„Ù„Ø¨Ø­ÙˆØ« Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ© - Ù…Ø±ÙƒØ² Ø§Ù„Ø¨Ø­ÙˆØ« Ø§Ù„Ø¹Ù„Ù…ÙŠØ© Ø§Ù„Ø²Ø±Ø§Ø¹ÙŠØ©ØŒ Ù…Ø±ÙƒØ² Ø­Ù„Ø¨<br>
                    2. Ø¯Ù„ÙŠÙ„ Ø²Ø±Ø§Ø¹Ø© Ø§Ù„ÙØ·Ø± Ø§Ù„Ø£Ø¨ÙŠØ¶ - ÙˆØ²Ø§Ø±Ø© Ø§Ù„Ø²Ø±Ø§Ø¹Ø© Ø§Ù„Ø³ÙˆØ±ÙŠØ©<br>
                    3. Mushroom Growers' Handbook - O. Y. (2004)<br>
                    4. Ø¹Ù„Ù… ÙØ·Ø±ÙŠØ§Øª Ø§Ù„Ù…Ø­Ø§ØµÙŠÙ„ - Ø¯. Ù…Ø­Ù…Ø¯ Ø¨ÙŠØ±Ù‚ ÙˆØ¢Ø®Ø±ÙˆÙ†
                </p>
            </div>
        </footer>

    <script>
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updatePhaseSettings();
            validateInputs();
            calculateAll();
        });

        // Update settings based on selected phase
        function updatePhaseSettings() {
            const phase = document.getElementById('compostPhase').value;
            const badge = document.getElementById('phaseBadge');
            const yieldInput = document.getElementById('yieldPerSqM');
            
            // Update badge and yield based on phase
            switch(phase) {
                case "2":
                    badge.textContent = "Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø«Ø§Ù†ÙŠ: 4-5 Ø¯ÙˆØ±Ø§Øª/Ø³Ù†Ø©";
                    badge.className = "phase-badge phase-2";
                    yieldInput.value = 25;
                    break;
                case "3":
                    badge.textContent = "Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø«Ø§Ù„Ø«: 6-7 Ø¯ÙˆØ±Ø§Øª/Ø³Ù†Ø© (Ø§Ù„Ù…Ø¹ÙŠØ§Ø± Ø§Ù„Ø³ÙˆØ±ÙŠ)";
                    badge.className = "phase-badge phase-3";
                    yieldInput.value = 30;
                    break;
                case "4":
                    badge.textContent = "Ø§Ù„Ø·ÙˆØ± Ø§Ù„Ø±Ø§Ø¨Ø¹: 8-10 Ø¯ÙˆØ±Ø§Øª/Ø³Ù†Ø©";
                    badge.className = "phase-badge phase-4";
                    yieldInput.value = 35;
                    break;
            }
        }

        // Validate inputs to ensure they're within reasonable ranges
        function validateInputs() {
            const inputs = [
                {id: 'roomLength', min: 2, max: 50},
                {id: 'roomWidth', min: 2, max: 20},
                {id: 'aisleWidth', min: 0.5, max: 2},
                {id: 'shelfLevels', min: 1, max: 10},
                {id: 'shelfWidth', min: 0.5, max: 2},
                {id: 'compostDensity', min: 70, max: 120},
                {id: 'yieldPerSqM', min: 10, max: 60},
                {id: 'exchangeRate', min: 1000, max: 100000},
                {id: 'compostPrice', min: 100, max: 500},
                {id: 'mushroomPrice', min: 0.5, max: 10},
                {id: 'operationalCosts', min: 0, max: 5000}
            ];
            
            inputs.forEach(input => {
                const element = document.getElementById(input.id);
                let value = parseFloat(element.value);
                
                if (isNaN(value)) {
                    element.value = input.min;
                } else if (value < input.min) {
                    element.value = input.min;
                } else if (value > input.max) {
                    element.value = input.max;
                }
            });
        }

        // Main calculation function
        function calculateAll() {
            // Get all input values
            const roomLength = parseFloat(document.getElementById('roomLength').value);
            const roomWidth = parseFloat(document.getElementById('roomWidth').value);
            const aisleWidth = parseFloat(document.getElementById('aisleWidth').value);
            const shelfLevels = parseInt(document.getElementById('shelfLevels').value);
            const shelfWidth = parseFloat(document.getElementById('shelfWidth').value);
            const compostDensity = parseFloat(document.getElementById('compostDensity').value);
            const yieldPerSqM = parseFloat(document.getElementById('yieldPerSqM').value);
            const exchangeRate = parseFloat(document.getElementById('exchangeRate').value);
            const compostPrice = parseFloat(document.getElementById('compostPrice').value);
            const mushroomPrice = parseFloat(document.getElementById('mushroomPrice').value);
            const operationalCosts = parseFloat(document.getElementById('operationalCosts').value);
            const phase = document.getElementById('compostPhase').value;
            
            // Engineering Calculations
            // Calculate number of shelf rows that fit in the room width
            let rowCount = Math.floor((roomWidth - 1) / (shelfWidth + aisleWidth));
            if (rowCount < 1) rowCount = 1;
            
            // Check if we need a cross aisle (for rooms longer than 12m)
            const needsCrossAisle = roomLength > 12;
            const crossAisleWidth = 1.2; // Standard cross aisle width
            
            // Calculate effective shelf length
            const effectiveShelfLength = needsCrossAisle ? 
                (roomLength - crossAisleWidth - 1) / 2 : 
                (roomLength - 1);
            
            // Calculate total effective area
            const areaPerShelf = effectiveShelfLength * shelfWidth;
            const totalArea = areaPerShelf * shelfLevels * rowCount * (needsCrossAisle ? 2 : 1);
            
            // Agriculture Calculations
            const totalCompost = (totalArea * compostDensity) / 1000; // Tons
            const totalPeat = totalArea * 45; // 45 liters per mÂ² (based on 4-5 cm thickness)
            
            // Determine cycles per year based on phase
            let cyclesPerYear;
            switch(phase) {
                case "2": cyclesPerYear = 5; break;
                case "3": cyclesPerYear = 6; break;
                case "4": cyclesPerYear = 8; break;
                default: cyclesPerYear = 6;
            }
            
            const productionPerCycle = totalArea * yieldPerSqM; // kg
            const annualYield = (productionPerCycle * cyclesPerYear) / 1000; // Tons
            
            // Financial Calculations
            const revenuePerCycle = productionPerCycle * mushroomPrice; // USD
            const costPerCycle = (totalCompost * compostPrice) + operationalCosts; // USD
            const profitPerCycle = revenuePerCycle - costPerCycle; // USD
            const annualProfitSYP = profitPerCycle * cyclesPerYear * exchangeRate; // SYP
            
            // Update UI with calculated values
            document.getElementById('totalArea').textContent = totalArea.toFixed(1);
            document.getElementById('totalCompost').textContent = totalCompost.toFixed(1);
            document.getElementById('totalPeat').textContent = totalPeat.toLocaleString();
            document.getElementById('annualYield').textContent = annualYield.toFixed(1);
            document.getElementById('profitCycle').textContent = profitPerCycle.toLocaleString(undefined, {maximumFractionDigits: 0});
            document.getElementById('profitAnnualSYP').textContent = annualProfitSYP.toLocaleString(undefined, {maximumFractionDigits: 0});
            
            // Draw the farm layout
            drawFarmLayout(roomLength, roomWidth, rowCount, shelfWidth, aisleWidth, 
                          effectiveShelfLength, needsCrossAisle, crossAisleWidth, 
                          totalCompost/rowCount/(needsCrossAisle?2:1));
        }

        // Draw the farm layout on canvas
        function drawFarmLayout(L, W, rows, sW, aW, sL, hasCross, crossW, weightPerBlock) {
            const canvas = document.getElementById('farmCanvas');
            const ctx = canvas.getContext('2d');
            
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Set drawing scale
            const margin = 60;
            const scale = Math.min(
                (canvas.width - margin * 2) / L,
                (canvas.height - margin * 2) / W
            );
            
            // Draw room outline
            ctx.strokeStyle = '#2c3e50';
            ctx.lineWidth = 4;
            ctx.strokeRect(margin, margin, L * scale, W * scale);
            
            // Draw room dimensions
            ctx.fillStyle = '#2c3e50';
            ctx.font = 'bold 14px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(`${L} Ù…`, margin + (L * scale) / 2, margin - 20);
            
            ctx.save();
            ctx.translate(margin - 20, margin + (W * scale) / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.textAlign = 'center';
            ctx.fillText(`${W} Ù…`, 0, 0);
            ctx.restore();
            
            // Draw shelves
            let currentY = margin + (0.5 * scale);
            const shelfColor = '#27ae60';
            const crossAisleColor = '#3498db';
            
            for (let i = 0; i < rows; i++) {
                // Left shelf segment
                const x1 = margin + (0.5 * scale);
                ctx.fillStyle = shelfColor;
                ctx.fillRect(x1, currentY, sL * scale, sW * scale);
                
                // Draw weight label on shelf
                ctx.fillStyle = 'white';
                ctx.font = 'bold 11px Arial';
                ctx.textAlign = 'left';
                ctx.fillText(`${weightPerBlock.toFixed(1)}T`, x1 + 8, currentY + (sW * scale) / 2 + 4);
                
                // If there's a cross aisle, draw right shelf segment
                if (hasCross) {
                    const x2 = x1 + (sL + crossW) * scale;
                    
                    // Draw cross aisle
                    ctx.fillStyle = crossAisleColor;
                    ctx.fillRect(x1 + sL * scale, currentY, crossW * scale, sW * scale);
                    
                    // Right shelf segment
                    ctx.fillStyle = shelfColor;
                    ctx.fillRect(x2, currentY, sL * scale, sW * scale);
                    
                    // Draw weight label on right shelf
                    ctx.fillStyle = 'white';
                    ctx.fillText(`${weightPerBlock.toFixed(1)}T`, x2 + 8, currentY + (sW * scale) / 2 + 4);
                    
                    // Label cross aisle (only for first row)
                    if (i === 0) {
                        ctx.fillStyle = '#2c3e50';
                        ctx.font = '10px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText(
                            `Ù…Ù…Ø± Ø¹Ø±Ø¶ÙŠ ${crossW}Ù…`, 
                            x1 + sL * scale + (crossW * scale) / 2, 
                            currentY + sW * scale + 15
                        );
                    }
                }
                
                // Draw longitudinal aisle dimensions
                if (i < rows - 1) {
                    ctx.fillStyle = '#7f8c8d';
                    ctx.font = '10px Arial';
                    ctx.textAlign = 'right';
                    ctx.fillText(
                        `Ù…Ù…Ø± ${aW}Ù…`, 
                        margin + L * scale + 10, 
                        currentY + (sW + aW/2) * scale
                    );
                }
                
                currentY += (sW + aW) * scale;
            }
            
            // Draw shelf levels indicator
            const levels = parseInt(document.getElementById('shelfLevels').value);
            ctx.fillStyle = '#2c3e50';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(
                `Ø¹Ø¯Ø¯ Ø§Ù„Ø·Ø¨Ù‚Ø§Øª: ${levels} Ù…Ø³ØªÙˆÙŠØ§Øª`, 
                margin + 10, 
                margin + W * scale + 25
            );
            
            // Draw phase indicator
            const phase = document.getElementById('compostPhase').value;
            let phaseText = '';
            switch(phase) {
                case "2": phaseText = "Ø·ÙˆØ± II"; break;
                case "3": phaseText = "Ø·ÙˆØ± III"; break;
                case "4": phaseText = "Ø·ÙˆØ± IV"; break;
            }
            
            ctx.fillText(
                `Ù†ÙˆØ¹ Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆØ³Øª: ${phaseText}`, 
                margin + L * scale - 150, 
                margin + W * scale + 25
            );
        }
    </script>
</body>
</html>